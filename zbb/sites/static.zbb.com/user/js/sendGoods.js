define("ybglobal",["jquery"],function(require,exports,module){var $=require("jquery"),e=window.location.href.split(".")[1],t={};t.domain_www="http://www."+e+".com/",t.user_url="http://user."+e+".com/",t.help_url="http://help."+e+".com/",t.static_url="http://static."+e+".com/",t.img_url="http://img."+e+".com/",t.cookie=function(e,t,n){if("undefined"==typeof t){var i=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),r=0;r<o.length;r++){var a=$.trim(o[r]);if(a.substring(0,e.length+1)==e+"="){i=decodeURIComponent(a.substring(e.length+1));break}}return i}n=n||{},null===t&&(t="",n=$.extend({},n),n.expires=-1);var s="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var c;"number"==typeof n.expires?(c=new Date,c.setTime(c.getTime()+24*n.expires*60*60*1e3)):c=n.expires,s="; expires="+c.toUTCString()}var d=n.path?"; path="+n.path:"",l=n.domain?"; domain="+n.domain:"",u=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),s,d,l,u].join("")},t.loadCSS=function(e){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)},t.isPhoen=function(e){var t=/^1[3|4|5|7|8][0-9]\d{8}$/;return t.test(e)},t.isCardID=function(e){var t=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;return t.test(e)},t.isTel=function(e){var t=/^([0|4\+]\d{2,3}[—]?-)?(0|8\d{2,3}-)?(\d{4,8})(-\d{1,4})?$/;return t.test(e)},t.isEmail=function(e){var t=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;return t.test(e)},t.iszip=function(e){var t=/^\d{6}$/;return t.test(e)},t.cart=function(){var e=this.info()||"";""!=e&&$.ajax({url:t.cart_url+"/cart_count",type:"post",dataType:"jsonp",beforeSend:function(){$("#num_txt").html("0")},success:function(e){$("#num_txt").html(e.data)}})},t.message=function(){var e=this.info()||"";""!=e&&$.ajax({url:t.domain_www+"home/user_stat?"+(new Date).getTime(),type:"post",dataType:"jsonp",beforeSend:function(){$("#unread1").html()},success:function(e){$("#unread1").html(e.unread)}})},t.info=function(){var e=this.cookie("NZW_YZ");if(!e||2!=e.split("|").length)return null;var t=e.split("|");return{name:t[0],type:t[1]}},t.toTop=function(){var e=function(e,t,n){var i=$(e).click(function(){return $("body,html").animate({scrollTop:0},n),!1}),o=$(window),r=1140;o.width()>=r&&$(this).scroll(function(){$(this).scrollTop()>t?i.fadeIn(n):i.fadeOut(n)})};$('<a id="backToTop" title="回到顶部" target="_self" href="javascript:;"><i>回到顶部</i><span class="I-ico">&#xe713;</span></a>').appendTo("body"),e("#backToTop",500,300)},t.browserIE6_8=function(){var e=/msie 6/i.test(navigator.userAgent),t=/msie 7/i.test(navigator.userAgent),n=/msie 8/i.test(navigator.userAgent);/msie 9/i.test(navigator.userAgent);return!!(e||t||n)},t.cnzz=function(){var e=document.createElement("script");e.src="http://s11.cnzz.com/z_stat.php?id=1257124587&web_id=1257124587";var t=document.getElementsByTagName("body")[0];t.appendChild(e,t)},module.exports=t}),define("citySelect",["jquery"],function(require,exports,module){var $=require("jquery"),e=function(e){function t(){r=$(this).val(),a=$(this).find("option:selected").text();var e=$(this).attr("id");if(e==o.provice.substring(1))l.val(""),u.val(a);else if(e==o.city.substring(1))l.val(""),n=s.find("option:selected").text(),u.val(n+" "+a);else if(e==o.dist.substring(1))return l.val(r),n=s.find("option:selected").text(),i=c.find("option:selected").text(),u.val(n+" "+i+" "+a),!1;$.post(o.url,{parent_id:r},function(t){if(t.success){var n="<option value='0'>请选择……</option>";$.each(t.data,function(e){n+="<option value='"+t.data[e].region_id+"'>"+t.data[e].region_name+"</option>"}),e==o.provice.substring(1)&&(d.hide(),c.show().html(n)),e==o.city.substring(1)&&d.show().html(n)}},"json")}var n,i,o=$.extend({provice:"#provice",city:"#city",dist:"#dist",region_id:"#region_id",region_name:"#region_name",url:"/buyer/address/get_region"},e),r="",a="",s=$(o.provice),c=$(o.city),d=$(o.dist),l=$(o.region_id),u=$(o.region_name);s.on("change",t),c.on("change",t),d.on("change",t)};module.exports=e}),define("sendGoods",["jquery","ybglobal","citySelect"],function(require,exports,module){var $=require("jquery"),e=require("ybglobal"),t=require("citySelect");exports.init=function(){function n(){f.parent().hide(),v.hide(),m.show()}function i(){return v.show(),m.hide(),f.parent().show(),!1}function o(){if(!r())return!1;var e=$("#consignee").val(),t=$("#provice option:selected").val(),n=$("#city option:selected").val(),o=$("#country option:selected").val(),a=$("#region_name").val(),v=$("#address").val(),m=$("#zipcode").val(),f=$("#tel").val()||"",g=$("#mobile").val()||"",h=$(this).data("oid");if(e==s&&v==d&&m==l&&f==u&&g==p&&a==c)return i(),!1;var _={};_.consignee=e,_.province_id=t,_.city_id=n,_.country_id=o,_.region_name=a,_.address=v,_.zipcode=m,_.tel=f,_.mobile=g,_=JSON.stringify(_),$.post("/express/address_ajax",{order_id:h,add:_},function(e){alert(e.data),window.location.reload()},"json")}function r(){var t=$("input[name=consignee]").val(),n=$("input[name=region_id]").val(),i=$("input[name=address]").val(),o=$("input[name=tel]").val(),r=$("input[name=mobile]").val(),a=$("input[name=zipcode]").val();return""==t?(alert("收货人姓名不能为空！"),!1):""==n?(alert("请选择所在地！"),!1):""==i?(alert("请输入详细地址！"),!1):""==a||e.iszip(a)?""==o&&""==r?(alert("固定电话和手机至少填一项!"),!1):""==o||e.isTel(o)?!(""!=r&&!e.isPhoen(r))||(alert("手机格式错误!"),!1):(alert("固定电话格式错误!"),!1):(alert("请输正确的6位数邮政编码！"),!1)}function a(){var e=$(this).data("oid"),t=$(this).data("type"),n=$("#express_name option:selected").val(),i=$.trim($("#invoice_no").val()),o=$.trim($("#comment").val());return"0"==t?(alert("您还没添加或设置“默认退货地址”，不能进行发货"),!1):"0"==n?(alert("有订单没有选择物流公司！"),!1):""==i?(alert("有订单没有填写订单号！"),!1):0!=g&&(g=!1,void $.post("/express/shipments",{order_id:e,express_name:n,invoice_no:i,comment:o},function(e){return 1==e.success?(alert(e.data),window.location.href="/orders/lists",!1):(alert(e.data),void(g=!0))},"json"))}var s=$("#consignee").val(),c=$("#region_name").val(),d=$("#address").val(),l=$("#zipcode").val(),u=$("#tel").val()||"",p=$("#mobile").val()||"";t({provice:"#provice",city:"#city",dist:"#country",region_id:"#region_id",region_name:"#region_name",url:"/express/get_region"});var v=$("#oldAddr"),m=$("#J_addr"),f=$("#J_edit_addr");f.on("click",n),$("#J-set0").on("click",i),$("#J-set1").on("click",o);var g=!0;$("#J_send").on("click",a)},exports.init()}),seajs.use("sendGoods");