define("tools",[],function(require,exports,module){String.prototype.len=function(){return this.replace(/[^\x00-\xff]/g,"aa").length};var e=new RegExp("[^\0-ÿ]"),n=function(n,t,o){var a="clewTip"+o,i=document.getElementById(a),r=n.value.len();if(null==i){var s=n.parentNode,l=document.createElement("span");l.setAttribute("id",a),s.appendChild(l),i=document.getElementById(a)}if(r>t){for(var u=n.value.split(""),d=u.length,c=0,o=0,f=0;f<d&&!(c>=t);f++){if(e.test(u[f])){if(c+=2,c>=t)break}else c++;o++}n.value=n.value.substring(0,o),i.innerHTML="<b id='inFont' style='color:#D80000;'>"+n.value.len()+"</b>/"+t}else i.innerHTML="<b id='inFont' style='color:#139337;'>"+r+"</b>/"+t+"<span style='color:#999;padding-left:5px;font-size:12px;'>字符</span>"};module.exports=n}),define("refundGoods",["jquery","common/js/seajs/count_down","user/js/lightbox","tools"],function(require,exports,module){var $=require("jquery");require("common/js/seajs/count_down"),require("user/js/lightbox");var e=require("tools");exports.init=function(){function n(){var e=$(this).data("rid"),n=$("#J-type").val(),t=$("#remark").val(),o=$("#uploadimg").val();return""==o?(alert("请上传图片凭证！"),!1):!i&&(i=!0,void $.ajax({type:"POST",url:"/refund/refused_money_submit",dataType:"json",data:{rec_id:e,refuse_reason:n,supplement:t,uploadimg:o},success:function(e){i=!1,e.success?window.location.href=e.data.url:alert(e.data)}}))}function t(){window.history.back(-1)}$("#uploadimg").val(""),$(".goods-img").lightbox();var o=$("#J_refused"),a=$("#J_cancel");$("#remark").on("keyup",function(){e(this,200,0)}),o.on("click",n);var i=!1;a.on("click",t)},exports.init()}),seajs.use("refundGoods");