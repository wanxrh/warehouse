define("",["jquery"],function(require,exports,i){var $=require("jquery");$.fn.lightbox=function(){var i,t=$(this),o=[],n=!1,e=[];t.find("img").off("click").on("click",function(){o.length=0;for(var i=$(this).parent().find("img"),t=i.length,n="",e=0;e<t;e++)o.push(i[e]),n+='<img id="light_img" src="'+o[e].src+'"/>';var h=$(this).parent().find("img").index($(this));return d(h,t,n),!1});var h=$(document).height(),c=$(window).height(),d=function(t,o,h){e.length=0;var c='<div class="mask"></div>',d='<div class="popup"><iframe id="lightbox"></iframe><div class="prev btn"><div></div></div><div class="next btn"><div></div></div><div id="lightbox-cont">'+h+'</div><div class="popupClose"><a></a></div></div>';$(".aui_state_lock").length>0?(n=!0,$(".aui_state_lock").hide()):$("body").append(c),$(" body").append(d),i=$("#lightbox-cont img").length,$("#lightbox-cont img").one("load",function(){e.push("true"),s(t,o,e)}).one("error",function(){e.push("false"),s(t,o,e)}).each(function(){this.complete&&$(this).load()}),$(".prev").on("click",function(){t--,t==-1&&(t=o-1),p(t,o,e)}),$(".next").on("click",function(){t++,t==o&&(t=0),p(t,o,e)}),$(".popupClose").on("click",function(){$("div").detach(".popup"),n?$(".aui_state_lock").show():$("div").detach(".mask")}),$(".popup,.btn").hover(function(){$(this).addClass("popuphover")},function(){$(this).removeClass("popuphover")})},s=function(t,o,n){i--,0==i&&p(t,o,n)},p=function(i,t,o){$(".popup").show();for(var n=0;n<t;n++)if(n!=i?$("#lightbox-cont img").eq(n).hide():$("#lightbox-cont img").eq(n).show(),"true"!=o[n]){$("#lightbox-cont img").eq(n).hide();var e=300,h=300}else var e=$(".popup").find("img").eq(i).height(),h=$(".popup").find("img").eq(i).width();var c=($(window).height()-e)/2+$(document).scrollTop(),d=($(window).width()-h)/2;a(e,h,c,d)},a=function(i,t,o,e){n||($(window).height()>$(document).height()?$(".mask").css("height",c):$(".mask").css("height",h)),$(window).height()<i&&(o=o>0?o:50),$("#lightbox-cont,#lightbox").css({height:i,width:t}),$(".popup").css({left:e,top:o,height:i+20,width:t+20})}}});