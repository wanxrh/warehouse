define("z_dialog",["jquery"],function(require,exports,module){var $=require("jquery"),t=function(t){$.extend(this,{content:null,width:null},t||{})};t.prototype={show:function(t){var t='<div id="J_make" class="g-remake"></div><div id="J_pop" class="g-pop"><span class="colse">X</span><div class="cont">'+this.content+"</div></div>";$("body").append(t),this.position()},remove:function(){$("#J_make,#J_pop").remove()},position:function(){$("#J_pop").css({width:this.width});var t=$("#J_pop").innerHeight()/2,e=$("#J_pop").innerWidth()/2;$("#J_pop").css({"margin-top":-t,"margin-left":-e})},init:function(){this.show(),$("body").on("click","#J_pop .colse",this.remove)}},module.exports=t}),define("goodsAdd",["jquery","z_dialog","common/js/seajs/matchmoney"],function(require,exports,module){var $=require("jquery"),t=require("z_dialog");require("common/js/seajs/matchmoney");exports.init=function(){function e(){var t=$(this).val();$.ajax({type:"POST",url:"/store/get_cate",dataType:"json",data:{parent_id:t},success:function(t){if(t.success){var e='<option selected="selected" value="0">-- 请选择商品分类 --</option>';$.each(t.data,function(i){e+='<option value="'+t.data[i].cate_id+'">'+t.data[i].cate_name+"</option>"}),$("#J_A2_type").html(e).show()}}})}function i(){var t=$(this).val();$.ajax({type:"POST",url:"/goods/shop_cate",dataType:"json",data:{parent_id:t},success:function(t){if(t.success){var e='<option selected="selected" value="0">-- 请选择商品分类 --</option>';$.each(t.data,function(i){e+='<option value="'+t.data[i].cate_id+'">'+t.data[i].cate_name+"</option>"}),$("#J_B2_type").html(e).attr("disabled",!1).show()}else $("#J_B2_type").attr("disabled",!0).hide()}})}function n(){var e=$(this).data("type");if(e)var i="";else var i='<p class="mt"><button class="addL btn-txt"><span>+</span>添加新属性</button> <button class="subL btn-txt btn-green"><span>-</span>减少新的属性</button></p>';require.async(["./user/js/editType"],function(e){var n='<div class="cont"><div class="t-tt clearfix"><div class="pro"><ul><li><input type="text" class="m-txt" name="spec_n[]" value=""></li><li><input type="text" class="m-txt" name="spec_n[]" value=""></li></ul></div><div class="rigid"><ul><li>原价</li><li>售价</li><li>库存</li><li class="num-width">货号</li><li>操作</li></ul></div></div><div class="mn"><div class="list clearfix"><div class="pro"><ul><li><input type="text" class="m-txt J-txt" name="spec_v_0[]" value=""></li><li><input type="text" class="m-txt J-txt" name="spec_v_1[]" value=""></li></ul></div><div class="rigid"><ul><li><input type="text" class="m-txt J-txt J-money" name="cost_price[]" value=""></li><li><input type="text" class="m-txt J-txt J-money" name="price[]" value=""></li><li><input type="text" class="m-txt J-txt J-num" name="stock[]" value=""></li><li class="num-width"><input type="text" class="m-txt num-width J-txt" name="sku[]" value=""></li><li><span class="op">x</span></li></ul></div></div></div></div>',a=$("#J_copy").find(".cont").length>0?$("#J_copy").find(".cont").clone():n,s='<div id="box" class="popBox"><div class="m-tt">编辑商品规格</div><div id="J_cont"></div><div class="ft">'+i+'<p class="mt"><button class="addH btn-txt"><span>+</span>增加新的一行</button> <button class="subH btn-txt btn-green"><span>-</span>减少一行</button></p><p class="f-tac"><button class="btn J_save">保存规格</button></p></div></div>',o=new t({content:s});o.init(),$("#J_cont").append(a),$("#box rigid").find(".J-txt").attr("readonly",!1),$("#box").find(".pro").each(function(t){$(this).hasClass("readonly")||$(this).find(".J-txt").attr("readonly",!1)}),e({Box:"#box",cBox:"#J_copy"}),$("#box").on("click","button",function(){o.position()}),$("#box").on("click",".J_save",function(){o.remove()}),$("body").on("keyup",".J-num",function(){this.value=this.value.replace(/\D/g,"")})})}function a(){var t=$("#J_A_type option:selected").val(),e=$("#J_A2_type option:selected").val(),i=$("#J_B_type option:selected").val(),n=$("#J_B2_type option:selected").val(),a=$.trim($("[name=goods_name]").val()),s=$(this).data("sku"),o=$("#J_copy").find(".cont").length;return 0==t||0==e?(alert("请选择好宝贝分类！"),!1):0==i?(alert("请选择好宝贝在本店的分类！"),!1):void 0==$("#J_B2_type").attr("disabled")&&0==n?(alert("请选择好宝贝在本店的分类！"),!1):""==a?(alert("请输入宝贝的商品名称！"),!1):s>0&&o<1?(alert("请输入宝贝的相关规格！"),!1):void $("#myForm").submit()}$("#J_A_type").on("change",e),$("#J_B_type").on("change",i),$("#J_add").on("click",n),$("#appbtn").on("click",a),$("body").matchmoney({obj:".J-money"})},exports.init()}),seajs.use("goodsAdd");