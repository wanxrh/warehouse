define("z_dialog",["jquery"],function(require,exports,module){var $=require("jquery"),t=function(t){$.extend(this,{content:null},t||{})};t.prototype={show:function(t){var t='<div id="J_make" class="g-remake"></div><div id="J_pop" class="g-pop"><span class="colse">X</span><div class="cont">'+this.content+"</div></div>";$("body").append(t),this.position()},remove:function(){$("#J_make,#J_pop").remove()},position:function(){var t=$("#J_pop").innerHeight()/2,a=$("#J_pop").innerWidth()/2;$("#J_pop").css({"margin-top":-t,"margin-left":-a})},init:function(){this.show(),$("body").on("click","#J_pop .colse",this.remove)}},module.exports=t}),define("typeList",["jquery","z_dialog"],function(require,exports,module){var $=require("jquery"),t=require("z_dialog");exports.init=function(){function a(){var t=$(this).data("id")||0,a='<div class="popBox"><div class="m-tt">新增商品分类</div><ul><li><span class="tt">分类名称：</span><input type="text" class="txt" id="p_tt" placeholder="最多能输入10个字"></li><li><span class="tt">排序：</span><input type="text" class="txt" id="p_sort"></li><li><span class="tt">显示：</span><input type="radio" name="checkA" value="1" checked>是 　<input type="radio" name="checkA" value="0">否 </li></ul><div class="f-tac"><button class="btn" id="subBtn">提交</button></div></div>';c(a,t)}function e(){var t=($(this).data("lv"),$(this).data("id")),a=$(this).data("pid")||0;$(this);$.ajax({type:"POST",url:"/cate/cate_edit_ajax",dataType:"json",data:{id:t},success:function(e){var i=e.data.cate_info.if_show>0;if(i)var s='<input type="radio" name="checkA" value="1" checked>是　<input type="radio" name="checkA" value="0">否';else var s='<input type="radio" name="checkA" value="1">是　<input type="radio" name="checkA" value="0" checked>否';var n="";if(a){for(var o="",d=e.data.top_cate.length-1;d>=0;d--)o+=e.data.top_cate[d].cate_id==a?'<option value="'+e.data.top_cate[d].cate_id+'" selected="selected">'+e.data.top_cate[d].cate_name+"</option>":'<option value="'+e.data.top_cate[d].cate_id+'">'+e.data.top_cate[d].cate_name+"</option>";n='<li id="p_type"><span class="tt">上级分类：</span><select id="J_pid" class="select">'+o+"</select></li>"}var l='<div class="popBox"><div class="m-tt">修改商品分类</div><ul><li><span class="tt">分类名称：</span><input type="text" id="p_tt" class="txt" value="'+e.data.cate_info.cate_name+'"></li>'+n+'<li><span class="tt">排序：</span><input type="text" class="txt" id="p_sort" value="'+e.data.cate_info.sort_order+'"></li><li><span class="tt">显示：</span>'+s+'</li></ul><div class="f-tac"><button class="btn" id="editAjax">提交</button></div></div>';c(l,t)}})}function i(){var t=$(this).data("id"),a="/cate/cate_del",e=$(this);$.ajax({type:"POST",url:a,dataType:"json",data:{id:t},success:function(t){if(t.success)e.parents("tr").remove();else{var a='<div style="color:#666; font-size:18px; text-align: center"><span class="I-ico" style=" font-size:60px; color:#e83228;">&#xb607;</span> <p>'+t.data+"</p></div>";c(a)}}})}function c(a,e){var i=new t({content:a});i.init(),$("body").on("keyup","#p_sort",function(){this.value=this.value.replace(/\D/g,"")}),$("body").off("click","#subBtn"),$("body").off("click","#editAjax"),$("body").on("click","#subBtn",function(){var t=$.trim($("#p_tt").val()),a=$.trim($("#p_sort").val());return""==t||""==a?(alert("请输入完信息！"),!1):void $.ajax({type:"POST",url:"/cate/cate_add",dataType:"json",data:{id:e,cate_name:t,sort_order:a,show:$("[name=checkA]").filter(":checked").val()},success:function(t){t.success?(alert("已经成功添加商品分类！"),window.location.reload()):alert(t.data)}})}),$("body").on("click","#editAjax",function(){var t=$.trim($("#p_tt").val()),a=$.trim($("#p_sort").val());return""==t||""==a?(alert("请输入完信息！"),!1):void $.ajax({type:"POST",url:"/cate/cate_edit",dataType:"json",data:{id:e,pid:$("#J_pid").val()||0,cate_name:t,sort_order:a,show:$("[name=checkA]").filter(":checked").val()},success:function(t){t.success?(alert("已经成功修改商品分类！"),window.location.reload()):alert(t.data)}})})}$(".J_add").on("click",a),$(".J_edit").on("click",e),$(".J_del").on("click",i)},exports.init()}),seajs.use("typeList");