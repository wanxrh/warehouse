define("ybglobal",["jquery"],function(require,exports,module){var $=require("jquery"),t=window.location.href.split(".")[1],e={};e.domain_www="http://www."+t+".com/",e.user_url="http://user."+t+".com/",e.help_url="http://help."+t+".com/",e.static_url="http://static."+t+".com/",e.img_url="http://img."+t+".com/",e.cookie=function(t,e,n){if("undefined"==typeof e){var o=null;if(document.cookie&&""!=document.cookie)for(var r=document.cookie.split(";"),a=0;a<r.length;a++){var i=$.trim(r[a]);if(i.substring(0,t.length+1)==t+"="){o=decodeURIComponent(i.substring(t.length+1));break}}return o}n=n||{},null===e&&(e="",n=$.extend({},n),n.expires=-1);var s="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var c;"number"==typeof n.expires?(c=new Date,c.setTime(c.getTime()+24*n.expires*60*60*1e3)):c=n.expires,s="; expires="+c.toUTCString()}var l=n.path?"; path="+n.path:"",d=n.domain?"; domain="+n.domain:"",u=n.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),s,l,d,u].join("")},e.loadCSS=function(t){var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=t,document.getElementsByTagName("head")[0].appendChild(e)},e.isPhoen=function(t){var e=/^1[3|4|5|7|8][0-9]\d{8}$/;return e.test(t)},e.isCardID=function(t){var e=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;return e.test(t)},e.isTel=function(t){var e=/^([0|4\+]\d{2,3}[—]?-)?(0|8\d{2,3}-)?(\d{4,8})(-\d{1,4})?$/;return e.test(t)},e.isEmail=function(t){var e=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;return e.test(t)},e.iszip=function(t){var e=/^\d{6}$/;return e.test(t)},e.cart=function(){var t=this.info()||"";""!=t&&$.ajax({url:e.cart_url+"/cart_count",type:"post",dataType:"jsonp",beforeSend:function(){$("#num_txt").html("0")},success:function(t){$("#num_txt").html(t.data)}})},e.message=function(){var t=this.info()||"";""!=t&&$.ajax({url:e.domain_www+"home/user_stat?"+(new Date).getTime(),type:"post",dataType:"jsonp",beforeSend:function(){$("#unread1").html()},success:function(t){$("#unread1").html(t.unread)}})},e.info=function(){var t=this.cookie("NZW_YZ");if(!t||2!=t.split("|").length)return null;var e=t.split("|");return{name:e[0],type:e[1]}},e.toTop=function(){var t=function(t,e,n){var o=$(t).click(function(){return $("body,html").animate({scrollTop:0},n),!1}),r=$(window),a=1140;r.width()>=a&&$(this).scroll(function(){$(this).scrollTop()>e?o.fadeIn(n):o.fadeOut(n)})};$('<a id="backToTop" title="回到顶部" target="_self" href="javascript:;"><i>回到顶部</i><span class="I-ico">&#xe713;</span></a>').appendTo("body"),t("#backToTop",500,300)},e.browserIE6_8=function(){var t=/msie 6/i.test(navigator.userAgent),e=/msie 7/i.test(navigator.userAgent),n=/msie 8/i.test(navigator.userAgent);/msie 9/i.test(navigator.userAgent);return!!(t||e||n)},e.cnzz=function(){var t=document.createElement("script");t.src="http://s11.cnzz.com/z_stat.php?id=1257124587&web_id=1257124587";var e=document.getElementsByTagName("body")[0];e.appendChild(t,e)},module.exports=e}),define("reg",["jquery","ybglobal"],function(require,exports,module){var $=require("jquery"),t=require("ybglobal");exports.init=function(){function e(){var t=$("#d_un"),e=$("#d_pw"),n=$("#J_tips");return""==t.val()||""==e.val()?(n.html("用户名或密码不能为空！").show(),!1):($.post("/login",{username:t.val(),password:e.val()},function(e){"200"==e.code?window.location.href=e.to:(n.html(e.data).show(),t.focus().addClass("error"))},"json"),!1)}function n(){var t=$(this);t.data("url");$.post("/home/check_login",function(t){1==t.success?window.location.href=t.data.url:v.show()},"json")}t.cnzz();var o=$("#un"),r=$("#pws"),a=$("#rpws"),i=$("#vcode"),s=$("#phone"),c=$("#pcode"),l=$(".p_btn"),d=$("#J_reg"),u={_name:!1,_psw:!1,_rpsw:!1,_vcode:!1,bool:!0,Error:function(t,e){t.focus().addClass("error").removeClass("right"),$("#J_reg_tips").text(e).show()},Rigth:function(t){t.addClass("right").removeClass("error"),$("#J_reg_tips").text("").hide()},countdown:function(t,e,n){t.text(e+n);var o=setInterval(function(){--e>0?t.text(e+n):(clearInterval(o),t.text("重新发送").removeClass("disabled").parent().addClass("btnWrap"))},1e3)},testPSW:function(){if(r.val()==o.val()&&""!=r.val()){u._psw=!1;var t="用户名和密码不能相同！";return u.Error($(this),t),!1}var e=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z_]{6,20}$/;if(1!=e.test(r.val())){u._psw=!1;var t="密码为6-20个字符，请用英文加数字或下划线组合！";return u.Error($(this),t),!1}if(0!=e.test(r.val())&&""==a.val())return u._psw=!0,!1;if(r.val()!=a.val()&&""!=r.val()&&""!=a.val()){u._psw=!1;var t="输入的密码不一致！";return u.Error($(this),t),!1}return r.val()==a.val()&&r.val()!=o.val()&&""!=r.val()?(u._psw=!0,u._rpsw=!0,u.Rigth($(this)),!1):void 0},testName:function(){var t=$(this),e=/^(?!.*\d{5,6})[a-zA-Z_\u4e00-\u9fa5\d+)]{6,50}$/;if(1!=e.test(t.val())){u._name=!1;var n="请输入6-50位非连续字符，支持中文数字及“_”组合。";return u.Error(t,n),!1}$.post("/reg/check_username",{uname:$(this).val()},function(e){"200"==e.code?(u._name=!0,u.Rigth(t)):(u._name=!1,u.Error(t,e.data))},"json")},testVcode:function(){var t=$(this);$.post("/reg/check_vcode",{vcode:$(this).val()},function(e){"200"==e.code?(u._vcode=!0,u.Rigth(t)):(u._vcode=!1,u.Error(t,e.data))},"json")},testPhnoe:function(){var e=$(this).val(),n=$(this);if(!t.isPhoen(e)){var o="请输入正确的手机号！";return u.Error(s,o),!1}l.attr("disabled",!0),$.post("/reg/check_mobile",{mobile:e},function(t){"200"==t.code?(l.attr("disabled",!1).removeClass("btn-Disable"),u.Rigth(n)):(u.Error(s,t.data),l.attr("disabled",!0).addClass("btn-Disable"))},"json")},sendCode:function(){var e=s.val();return!!t.isPhoen(e)&&void $.post(" /reg/get_mobile_code",{mobile:e},function(t){if("200"==t.code)return l.attr({value:"发送中...",disabled:"disabled"}),u.countdown(l,60,"秒后可重新发送"),!0},"json")},testCode:function(){var e=s.val(),n=$(this).val(),o=$(this);return!!t.isPhoen(e)&&void $.post("/reg/check_mobile_code",{mobile:e,code:n},function(t){"200"!=t.code?(d.attr("disabled",!0).addClass("btn-Disable"),u.Error(o,t.data)):(d.attr("disabled",!1).removeClass("btn-Disable"),u.Rigth(o))},"json")},subAjax:function(){if(1!=u.bool)return!1;if(1!=u._name){var t="用户名为6-50位非连续字符，支持中文数字及“_”组合。";return u.Error(o,t),!1}if(1!=u._psw){var t="密码为6-20个字符，请用英文加数字或下划线组合！";return u.Error(r,t),!1}if(1!=u._rpsw){var t="密码为6-20个字符，请用英文加数字或下划线组合！";return u.Error(a,t),!1}if(1!=u._vcode){var t="验证码错误或不能为空！";return u.Error(i,t),!1}u.bool=!1,$.post("/reg/save",{uname:o.val(),password:r.val(),a_password:a.val(),vcode:i.val(),mobile:s.val(),code:c.val()},function(t){"200"==t.code?window.location.href=t.to:u.Error(null,t.data)},"json")},init:function(){o.on("change",u.testName),r.on("change",u.testPSW),a.on("change",u.testPSW),s.on("change",u.testPhnoe),i.on("change",u.testVcode),l.on("click",u.sendCode),c.on("change",u.testCode),d.on("click",u.subAjax),$(".m-txt").on("focus",function(){$(this).removeClass("error")})}};u.init(),$("body").on("click","#J_log",e);var v={show:function(){$("#J_make,#J_pop").show()},hide:function(){$("#J_make,#J_pop").hide()},tab:function(){var t=$(this).index(),e=$("#J_tab li").filter(".z-crt").index();$("#J_tab li").eq(e).removeClass("z-crt"),$("#J_tab li").eq(t).addClass("z-crt"),$("#J_tab_ct ul").eq(e).hide(),$("#J_tab_ct ul").eq(t).show();var n=$("#J_pop").innerHeight();$("#J_pop").css("margin-top",-(n/2-40))},init:function(){$("body").on("click","#J_pop .colse",v.hide),$("body").on("click","#J_tab li",v.tab)}};v.init(),$("body").on("click","#J_dld,#J_rz,#J_ent",n)},exports.init()}),seajs.use("reg");